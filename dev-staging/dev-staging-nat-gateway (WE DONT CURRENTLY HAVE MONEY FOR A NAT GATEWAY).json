{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "DevStaging Network NAT Gateway Stack",

  "Resources" : {

        "DevStagingNatGatewayA" : {
            "Type" : "AWS::EC2::NatGateway",
            "Properties" : {
                "AllocationId" : { "Fn::GetAtt" : ["DevStagingElasticIpNatgatewayA", "AllocationId"]},
                "SubnetId" : { "Fn::ImportValue" : {"Fn::Sub" : "dev-staging-network-DevStagingServerSubnetA"}},
                "Tags" : [ {"Key" : "Name", "Value" : "DevStaging NAT Gateway A" } ]
            }
        },

        "DevStagingNatGatewayB" : {
            "Type" : "AWS::EC2::NatGateway",
            "Properties" : {
                "AllocationId" : { "Fn::GetAtt" : ["DevStagingElasticIpNatgatewayB", "AllocationId"]},
                "SubnetId" : { "Fn::ImportValue" : {"Fn::Sub" : "dev-staging-network-DevStagingServerSubnetB"}},
                "Tags" : [ {"Key" : "Name", "Value" : "DevStaging NAT Gateway B" } ]
            }
        },

        "DevStagingElasticIpNatgatewayA" : {
            "Type" : "AWS::EC2::EIP",
            "Properties" : {
                "Domain" : "VPC"
            }
        },

        "DevStagingElasticIpNatgatewayB" : {
            "Type" : "AWS::EC2::EIP",
            "Properties" : {
                "Domain" : "VPC"
            }
        },

        "DevStagingNatRouteA" : {
            "Type" : "AWS::EC2::Route",
            "Properties" : {
                "RouteTableId" : { "Fn::ImportValue" : {"Fn::Sub" : "dev-staging-route-table-DevStagingDataARouteTable"} },
                "DestinationCidrBlock" : "0.0.0.0/0",
                "NatGatewayId" : { "Ref" : "DevStagingNatGatewayA" }
            }
        },

        "DevStagingNatRouteB" : {
            "Type" : "AWS::EC2::Route",
            "Properties" : {
                "RouteTableId" : { "Fn::ImportValue" : {"Fn::Sub" : "dev-staging-route-table-DevStagingDataBRouteTable"} },
                "DestinationCidrBlock" : "0.0.0.0/0",
                "NatGatewayId" : { "Ref" : "DevStagingNatGatewayB" }
            }
        }

   },

   "Outputs" : {
        "OutputDevStagingNatGatewayA" : {
            "Description" : "Output DevStaging Nat Gateway A",
            "Value" :  { "Ref" : "DevStagingNatGatewayA" },
            "Export" : { "Name" : {"Fn::Sub": "${AWS::StackName}-DevStagingNatGatewayA" }}
        },

        "OutputDevStagingNatGatewayB" : {
            "Description" : "Output DevStaging Nat Gateway B",
            "Value" :  { "Ref" : "DevStagingNatGatewayB" },
            "Export" : { "Name" : {"Fn::Sub": "${AWS::StackName}-DevStagingNatGatewayB" }}
        }
    }

}
